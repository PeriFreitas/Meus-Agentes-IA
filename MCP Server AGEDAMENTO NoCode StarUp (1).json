{
  "name": "MCP Server AGEDAMENTO NoCode StarUp",
  "nodes": [
    {
      "parameters": {
        "path": "86b021dc-160c-4483-b784-37cb65f043ef"
      },
      "type": "@n8n/n8n-nodes-langchain.mcpTrigger",
      "typeVersion": 2,
      "position": [
        0,
        0
      ],
      "id": "0310979d-2f54-4b97-945e-874f0b565bca",
      "name": "MCP Server Trigger",
      "webhookId": "86b021dc-160c-4483-b784-37cb65f043ef"
    },
    {
      "parameters": {
        "description": "# Buscar profissionais\n- Lista dados dos profissionais como nome, id, agenda_id",
        "workflowId": {
          "__rl": true,
          "value": "iA08jpMhSLPj3aOt",
          "mode": "list",
          "cachedResultName": "TOOLS MCP"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "conversa_id": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('conversa_id', `Id da conversa do usuário (conversa_id) `, 'string') }}",
            "tipo": "Consultar profissionais"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "conversa_id",
              "displayName": "conversa_id",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "tipo",
              "displayName": "tipo",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        }
      },
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "typeVersion": 2.2,
      "position": [
        -320,
        256
      ],
      "id": "738ea802-09fe-4899-9667-7db206e582af",
      "name": "Buscar_profissionais"
    },
    {
      "parameters": {
        "tableId": "agendamentos",
        "fieldsUi": {
          "fieldValues": [
            {
              "fieldId": "conversa_id",
              "fieldValue": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('fieldValues0_Field_Value', `id da conversa do usuário (conversa_id) `, 'string') }}"
            },
            {
              "fieldId": "nome",
              "fieldValue": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('fieldValues1_Field_Value', `nome completo do usuário  `, 'string') }}"
            },
            {
              "fieldId": "telefone",
              "fieldValue": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('fieldValues2_Field_Value', `Telefone do usuário `, 'string') }}"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.supabaseTool",
      "typeVersion": 1,
      "position": [
        592,
        256
      ],
      "id": "f13c2051-be99-4a3e-9ce3-a49460759d35",
      "name": "Criar_cliente",
      "credentials": {
        "supabaseApi": {
          "id": "5K8QedveA5xu99g3",
          "name": "supabase bravaIA"
        }
      }
    },
    {
      "parameters": {
        "description": "# Consultar disponibilidade do profissional escolhido pelo cliente",
        "workflowId": {
          "__rl": true,
          "value": "iA08jpMhSLPj3aOt",
          "mode": "list",
          "cachedResultName": "TOOLS MCP"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "conversa_id": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('conversa_id', `id da conversa do usuário `, 'string') }}",
            "tipo": "Consultar disponibilidade",
            "profissional_id": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('profissional_id', `# id do profissional escolhido pelo cliente`, 'string') }}",
            "data_inicio": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('data_inicio', ``, 'string') }}",
            "data_fim": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('data_fim', ``, 'string') }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "conversa_id",
              "displayName": "conversa_id",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "tipo",
              "displayName": "tipo",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "profissional_id",
              "displayName": "profissional_id",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "data_inicio",
              "displayName": "data_inicio",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "data_fim",
              "displayName": "data_fim",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        }
      },
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "typeVersion": 2.2,
      "position": [
        -144,
        256
      ],
      "id": "e7412a24-cdcd-4c8c-a36b-9488cb58d46d",
      "name": "Consultar_disponibilidade"
    },
    {
      "parameters": {
        "description": "# Agenda, tool para agendar consultas",
        "workflowId": {
          "__rl": true,
          "value": "iA08jpMhSLPj3aOt",
          "mode": "list",
          "cachedResultName": "TOOLS MCP"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "conversa_id": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('conversa_id', `# conversa id do usuário `, 'string') }}",
            "tipo": "Agendar",
            "profissional_id": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('profissional_id', `id do profissional selecionado `, 'string') }}",
            "data_inicio": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('data_inicio', ``, 'string') }}",
            "data_fim": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('data_fim', ``, 'string') }}",
            "titulo": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('titulo', `# titulo da consulta`, 'string') }}",
            "descrição": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('descri__o', `# descrição detalhada da consulta`, 'string') }}",
            "agenda_id": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('agenda_id', `id da agenda do profissional`, 'string') }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "conversa_id",
              "displayName": "conversa_id",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "tipo",
              "displayName": "tipo",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "profissional_id",
              "displayName": "profissional_id",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "data_inicio",
              "displayName": "data_inicio",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "data_fim",
              "displayName": "data_fim",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "titulo",
              "displayName": "titulo",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "descrição",
              "displayName": "descrição",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "agenda_id",
              "displayName": "agenda_id",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        }
      },
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "typeVersion": 2.2,
      "position": [
        0,
        256
      ],
      "id": "bbecfbb0-eec6-4fb8-ad42-ddc70c8f9438",
      "name": "Agendar"
    },
    {
      "parameters": {
        "description": "# Buscar consultas agendadas do cliente",
        "workflowId": {
          "__rl": true,
          "value": "iA08jpMhSLPj3aOt",
          "mode": "list",
          "cachedResultName": "TOOLS MCP"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "conversa_id": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('conversa_id', `id da conversa do usuário `, 'string') }}",
            "tipo": "Buscar consultas"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "conversa_id",
              "displayName": "conversa_id",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "tipo",
              "displayName": "tipo",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "profissional_id",
              "displayName": "profissional_id",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "data_inicio",
              "displayName": "data_inicio",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "data_fim",
              "displayName": "data_fim",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "titulo",
              "displayName": "titulo",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "descrição",
              "displayName": "descrição",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "agenda_id",
              "displayName": "agenda_id",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        }
      },
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "typeVersion": 2.2,
      "position": [
        144,
        256
      ],
      "id": "32a62ee9-5fe0-450b-bbcc-770ecfb69c20",
      "name": "Buscar_consultas"
    },
    {
      "parameters": {
        "description": "# cancelar eventos agendados",
        "workflowId": {
          "__rl": true,
          "value": "iA08jpMhSLPj3aOt",
          "mode": "list",
          "cachedResultName": "TOOLS MCP"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "conversa_id": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('conversa_id', `id da conversa do usuário`, 'string') }}",
            "tipo": "Cancelar",
            "agenda_id": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('agenda_id', `# id da agenda onde esta agendado o evento`, 'string') }}",
            "evento_id": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('evento_id', `# id do evento (id_calendar)`, 'string') }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "conversa_id",
              "displayName": "conversa_id",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "tipo",
              "displayName": "tipo",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "profissional_id",
              "displayName": "profissional_id",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "data_inicio",
              "displayName": "data_inicio",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "data_fim",
              "displayName": "data_fim",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "titulo",
              "displayName": "titulo",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "descrição",
              "displayName": "descrição",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "agenda_id",
              "displayName": "agenda_id",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "evento_id",
              "displayName": "evento_id",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        }
      },
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "typeVersion": 2.2,
      "position": [
        288,
        256
      ],
      "id": "737a0934-3574-4acc-9876-854292f52bdc",
      "name": "cancelar_evento"
    },
    {
      "parameters": {
        "description": "# Reagendar, tool para Reagendar consultas",
        "workflowId": {
          "__rl": true,
          "value": "iA08jpMhSLPj3aOt",
          "mode": "list",
          "cachedResultName": "TOOLS MCP"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "conversa_id": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('conversa_id', `# conversa id do usuário `, 'string') }}",
            "tipo": "Reagendar",
            "profissional_id": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('profissional_id', `id do profissional`, 'string') }}",
            "data_inicio": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('data_inicio', ``, 'string') }}",
            "data_fim": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('data_fim', ``, 'string') }}",
            "titulo": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('titulo', `# titulo da consulta`, 'string') }}",
            "descrição": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('descri__o', `# descrição detalhada da consulta`, 'string') }}",
            "agenda_id": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('agenda_id', `id da agenda do profissional`, 'string') }}",
            "evento_id": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('evento_id', `id do evento para ser reagendado`, 'string') }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "conversa_id",
              "displayName": "conversa_id",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "tipo",
              "displayName": "tipo",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "profissional_id",
              "displayName": "profissional_id",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "data_inicio",
              "displayName": "data_inicio",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "data_fim",
              "displayName": "data_fim",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "titulo",
              "displayName": "titulo",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "descrição",
              "displayName": "descrição",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "agenda_id",
              "displayName": "agenda_id",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "evento_id",
              "displayName": "evento_id",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        }
      },
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "typeVersion": 2.2,
      "position": [
        448,
        256
      ],
      "id": "74ba1995-8b01-4b42-995f-b6f3a4bce32a",
      "name": "Reagendar"
    },
    {
      "parameters": {
        "operation": "update",
        "tableId": "agendamentos",
        "filters": {
          "conditions": [
            {
              "keyName": "conversa_id",
              "condition": "eq",
              "keyValue": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('conditions0_Field_Value', `id da conversa do usuário (conversa_id) `, 'string') }}"
            }
          ]
        },
        "fieldsUi": {
          "fieldValues": [
            {
              "fieldId": "nome",
              "fieldValue": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('fieldValues0_Field_Value', `nome completo do usuário `, 'string') }}"
            },
            {
              "fieldId": "telefone",
              "fieldValue": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('fieldValues1_Field_Value', `telefone do usuário `, 'string') }}"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.supabaseTool",
      "typeVersion": 1,
      "position": [
        720,
        256
      ],
      "id": "60cc0917-adea-499b-9007-d9b7a2ea69f1",
      "name": "Atualizar_cliente",
      "credentials": {
        "supabaseApi": {
          "id": "5K8QedveA5xu99g3",
          "name": "supabase bravaIA"
        }
      }
    }
  ],
  "pinData": {},
  "connections": {
    "Buscar_profissionais": {
      "ai_tool": [
        [
          {
            "node": "MCP Server Trigger",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Criar_cliente": {
      "ai_tool": [
        [
          {
            "node": "MCP Server Trigger",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Consultar_disponibilidade": {
      "ai_tool": [
        [
          {
            "node": "MCP Server Trigger",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Agendar": {
      "ai_tool": [
        [
          {
            "node": "MCP Server Trigger",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Buscar_consultas": {
      "ai_tool": [
        [
          {
            "node": "MCP Server Trigger",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "cancelar_evento": {
      "ai_tool": [
        [
          {
            "node": "MCP Server Trigger",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Reagendar": {
      "ai_tool": [
        [
          {
            "node": "MCP Server Trigger",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Atualizar_cliente": {
      "ai_tool": [
        [
          {
            "node": "MCP Server Trigger",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "7b510ca7-492d-4ddc-90a8-19157ad503f5",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "b1646430cd996814a4d81c1dfc7a9b1eaf95135bc455fab10103bd949f30c6d7"
  },
  "id": "OOhlYLlxfOLWqw4y",
  "tags": [
    {
      "createdAt": "2025-07-15T12:43:04.914Z",
      "updatedAt": "2025-07-15T12:43:04.914Z",
      "id": "BjKWNW4Zqd2Ww649",
      "name": "NoCode StartUp"
    }
  ]
}